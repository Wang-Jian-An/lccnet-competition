@*
    Competition index page - A Kaggle-like competition
*@
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>競賽：</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">首頁</a></li>
                <li class="breadcrumb-item active" aria-current="page">競賽</li>
            </ol>
        </nav>
    </div>

    @* 移除原本的 tab 切換，改以單一頁面 section + fragment 錨點（#about/#data/#submission/#leaderboard）呈現 *@

    <section id="about" class="mb-4">
        <div class="card mb-3">
            <div class="card-body">
                <h4>任務說明</h4>
                <p>
                    本次競賽將使用一個高品質、由專家標註的 MRI 資料集，專門用於腦腫瘤的分割與分類。
                    它針對現有資料集（例如 BraTS、Figshare）中的常見限制進行改進，包括類別不平衡、腫瘤類型範圍狹窄，以及標註不一致等問題。
                </p>

                <h5>重要日期</h5>
                <ul>
                    <li>開始：2025-12-30</li>
                    <li>截止：2026-01-09</li>
                </ul>

                <h5>評分方式</h5>
                <p>公開榜與私有榜混合評分。公開榜用於即時比較，最終排名以私有榜為準。</p>
            </div>
        </div>
    </section>
</div>

@section Scripts {
    <script>
        (function () {
            var fileInput = document.getElementById('submissionFile');
            var exampleBtn = document.getElementById('exampleSubmissionBtn');

            if (fileInput) {
                fileInput.addEventListener('change', function (e) {
                    var f = e.target.files && e.target.files[0];
                    if (f) {
                        var maxMB = 10;
                        if (f.size > maxMB * 1024 * 1024) {
                            alert('檔案大小超過 ' + maxMB + ' MB，請壓縮或使用較小檔案。');
                            e.target.value = null;
                        }
                    }
                });
            }

            if (exampleBtn) {
                exampleBtn.addEventListener('click', function () {
                    // 這裡可以改成實際範例檔案下載路徑
                    var csv = 'Id,Prediction\n1,0.5\n2,0.7\n3,0.2\n';
                    var blob = new Blob([csv], { type: 'text/csv' });
                    var url = URL.createObjectURL(blob);
                    var a = document.createElement('a');
                    a.href = url;
                    a.download = 'example_submission.csv';
                    document.body.appendChild(a);
                    a.click();
                    a.remove();
                    URL.revokeObjectURL(url);
                });
            }
        })();
    </script>
}
